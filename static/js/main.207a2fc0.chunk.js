(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{34:function(e,t,n){e.exports=n(46)},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),u=n(30),s=n(2),o=n(10),i=n.n(o),m=n(8),f=n(14),p=n(3);var b={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},h=Object(a.createContext)();function v(e){var t=Object(a.useState)({recentSearches:function(){var e=b.loadFromStorage("recent_searches");return e||[]}(),results:null,track:null}),n=Object(p.a)(t,2),c=n[0],l=n[1];return r.a.createElement(h.Provider,{value:[c,l]},e.children)}var E=n(12),O=n.n(E);O.a.initialize({client_id:"ggX0UomnLs0VmW7qZnCzw "});var j=function(){var e=Object(a.useContext)(h),t=Object(p.a)(e,2),n=t[0].recentSearches,c=t[1],l=function(){var e=Object(f.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/tracks",{q:t.title,license:"cc-by-sa"});case 2:n=e.sent,c((function(e){return Object(m.a)(Object(m.a)({},e),{},{results:n})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,n.length>0&&r.a.createElement("div",{className:"recent-searches-container"},r.a.createElement("h2",null,"Recent Searches"),r.a.createElement("ul",null,n&&n.map((function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return l(e)}},e.title)})))))},d=function(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useContext)(h),u=Object(p.a)(l,2),s=u[0].track;u[1];Object(a.useEffect)((function(){c(null)}),[s]);var o=function(){var e=Object(f.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.oEmbed(s.uri,{auto_play:!0});case 2:t=e.sent,c(t.html),console.log("player",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement("div",{className:"track-container"},r.a.createElement("h1",null,s.title),n?r.a.createElement("div",{className:"player",dangerouslySetInnerHTML:{__html:n}}):r.a.createElement("img",{onClick:o,src:s.artwork_url,alt:""})))},g=n(24),k=n(54),S=n(53),x=function(e){var t=e.result,n=Object(a.useRef)(null),c=Object(a.useState)(!1),l=Object(p.a)(c,2),u=l[0],s=l[1],o=Object(a.useContext)(h),i=Object(p.a)(o,2),f=(i[0].track,i[1]);return r.a.createElement("li",{className:"result-container ".concat(u?"animateFlying":""),ref:n,onClick:function(){s(!0),setTimeout((function(){f((function(e){return Object(m.a)(Object(m.a)({},e),{},{track:t})}))}),1500)}},t.title)},y=function(e){var t=Object(a.useState)(1),n=Object(p.a)(t,2),c=n[0],l=n[1],u=Object(a.useState)(6),s=Object(p.a)(u,2),o=s[0],i=(s[1],Object(a.useState)(h())),m=Object(p.a)(i,2),f=m[0],b=m[1];function h(){return e.results.slice((c-1)*o,c*o)}function v(t){if("next"===t){if(c*o>=e.results.length)return;l((function(e){return e+1}))}else{if(c*o<=e.results.length)return;l((function(e){return e-1}))}}return Object(a.useEffect)((function(){b(h())}),[c]),r.a.createElement(k.a,{onClickAway:e.toggleResults},r.a.createElement(S.a,{in:f},r.a.createElement("div",{className:"results-container"},r.a.createElement("ul",null,f.map((function(e){return r.a.createElement(x,{key:e.id,result:e})}))),r.a.createElement("div",{className:"actions-container"},r.a.createElement("button",{className:"sec",onClick:function(){v("prev")}},"Previous"),r.a.createElement("button",{className:"prime",onClick:function(){v("next")}},"Next")))))},N=n(32),w={makeId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}};O.a.initialize({client_id:"ggX0UomnLs0VmW7qZnCzw "});var C=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],c=t[1],l=Object(a.useContext)(h),u=Object(p.a)(l,2),s=u[0].results,o=u[1],v=function(){var e=Object(f.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.a.get("/tracks",{q:n,license:"cc-by-sa"});case 3:a=e.sent,o((function(e){var t=w.makeId(),r=Date.now(),c=Object(g.a)(e.recentSearches);return e.recentSearches.length>=5?(c=c.sort((function(e,t){return e.created_at-t.created_at}))).splice(0,1,{title:n,id:t,created_at:r}):c=[{title:n,id:t,created_at:r}].concat(Object(g.a)(e.recentSearches)),c=c.sort((function(e,t){return e.created_at-t.created_at})),b.saveToStorage("recent_searches",c),Object(m.a)(Object(m.a)({},e),{},{results:a,recentSearches:c})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-container"},r.a.createElement("form",{onSubmit:v},r.a.createElement("input",{onChange:function(e){var t=e.target;c(t.value)},type:"text",placeholder:"Type to search!"}),r.a.createElement("button",{type:"submit",className:"search-icon-container"},r.a.createElement(N.a,{className:"search-icon"}))),s&&r.a.createElement(y,{toggleResults:function(){o((function(e){return Object(m.a)(Object(m.a)({},e),{},{results:null})}))},results:s}))};var _=[{path:"/",component:function(){return r.a.createElement("section",{className:"home flex space-between"},r.a.createElement("div",{className:"search-wrapper flex column"},r.a.createElement(C,null),r.a.createElement(j,null)),r.a.createElement("div",{className:"track-wrapper"},r.a.createElement(d,null)))}}];var F=function(){return r.a.createElement("main",{className:"app"},r.a.createElement(u.a,null,r.a.createElement(s.c,null,_.map((function(e){return r.a.createElement(s.a,{key:e.path,exact:!0,component:e.component,path:e.path})})))))};n(45);l.a.render(r.a.createElement(v,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.207a2fc0.chunk.js.map