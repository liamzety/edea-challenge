{"version":3,"sources":["services/storageService.js","context/MainContext.jsx","cmps/RecentSearches.jsx","cmps/Track.jsx","cmps/Result.jsx","cmps/Results.jsx","services/utilityService.js","cmps/Search.jsx","routes.js","views/Home.jsx","App.js","index.js"],"names":["loadFromStorage","key","val","localStorage","getItem","JSON","parse","saveToStorage","stringify","MainContextContext","createContext","MainContextProvider","props","useState","recentSearches","storageService","getIfExsits","results","track","MainContext","setMainContext","Provider","value","children","SC","initialize","client_id","RecentSearches","useContext","initSearch","recentSearch","a","get","q","title","license","prevState","length","className","map","id","onClick","Track","player","setPlayer","useEffect","handlePlay","oEmbed","uri","auto_play","html","console","log","dangerouslySetInnerHTML","__html","src","artwork_url","alt","Result","result","resultRef","useRef","isFlying","setIsFlying","ref","setTimeout","Results","pageNumber","setPageNumber","pageSize","getPaginatedResults","setResults","slice","paginate","nextOrPrev","ClickAwayListener","onClickAway","toggleResults","Fade","in","makeId","text","possible","i","charAt","Math","floor","random","Search","searchInput","setSearchInput","handleSearch","e","preventDefault","tracks","utilityService","created_at","Date","now","sort","search1","search2","splice","onSubmit","onChange","target","type","placeholder","path","component","App","routes","route","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0PAUe,OACXA,gBAXJ,SAAyBC,GACrB,IAAIC,EAAMC,aAAaC,QAAQH,GAC/B,OAAQC,EAAOG,KAAKC,MAAMJ,GAAO,MAUjCK,cAPJ,SAAuBN,EAAKC,GACxBC,aAAaF,GAAOI,KAAKG,UAAUN,KCHjCO,EAAqBC,0BAE3B,SAASC,EAAoBC,GAAQ,IAAD,EAEMC,mBAAS,CAC3CC,eAIJ,WACI,IAAMA,EAAiBC,EAAef,gBAAgB,mBACtD,OAAIc,GAGO,GATKE,GAChBC,QAAS,KACTC,MAAO,OALqB,mBAEzBC,EAFyB,KAEZC,EAFY,KAehC,OACI,kBAACX,EAAmBY,SAApB,CAA6BC,MAAO,CAACH,EAAaC,IAC7CR,EAAMW,U,qBClBnBC,IAAGC,WAAW,CACVC,UAAW,2BAER,IAAMC,EAAiB,WAAO,IAAD,EACaC,qBAAWnB,GADxB,mBACvBK,EADuB,KACvBA,eAAkBM,EADK,KAE1BS,EAAU,uCAAG,WAAOC,GAAP,eAAAC,EAAA,sEAECP,IAAGQ,IAAI,UAAW,CAC9BC,EAAGH,EAAaI,MAAOC,QAAS,aAHrB,OAEflB,EAFe,OAKfG,GAAe,SAAAgB,GACX,OAAO,2BAAKA,GAAZ,IAAuBnB,eANZ,2CAAH,sDAShB,OACI,oCAEQH,EAAeuB,OAAS,GACxB,yBAAKC,UAAU,6BACX,+CACA,4BACKxB,GAAkBA,EAAeyB,KAAI,SAAAT,GAClC,OACI,wBAAI7B,IAAK6B,EAAaU,GAAIC,QAAS,kBAAMZ,EAAWC,KAC/CA,EAAaI,cCxBrCQ,EAAQ,WAAO,IAAD,EACK7B,mBAAS,MADd,mBAChB8B,EADgB,KACRC,EADQ,OAEahB,qBAAWnB,GAFxB,mBAEdS,EAFc,KAEdA,MAFc,KAGvB2B,qBAAU,WACND,EAAU,QACX,CAAC1B,IAEJ,IAAM4B,EAAU,uCAAG,4BAAAf,EAAA,sEACMP,IAAGuB,OAAO7B,EAAM8B,IAAK,CAAEC,WAAW,IADxC,OACTF,EADS,OAEfH,EAAUG,EAAOG,MACjBC,QAAQC,IAAI,SAAUT,GAHP,2CAAH,qDAMhB,OACI,oCAEQzB,GAAS,yBAAKoB,UAAU,mBACpB,4BAAKpB,EAAMgB,OAEVS,EACG,yBAAKL,UAAU,SAASe,wBAAyB,CAAEC,OAAQX,KAE3D,yBAAKF,QAASK,EAAYS,IAAKrC,EAAMsC,YAAaC,IAAI,Q,wBCtBjEC,EAAS,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACfC,EAAYC,iBAAO,MADS,EAEFhD,oBAAS,GAFP,mBAE3BiD,EAF2B,KAEjBC,EAFiB,OAGEnC,qBAAWnB,GAHb,mBAGhBW,GAHgB,KAGzBF,MAHyB,MAYlC,OACI,wBAAIoB,UAAS,2BAAsBwB,EAAW,gBAAkB,IAAME,IAAKJ,EAAWnB,QARjE,WACrBsB,GAAY,GACZE,YAAW,WACP7C,GAAe,SAACgB,GAAgB,OAAO,2BAAKA,GAAZ,IAAuBlB,MAAOyC,SAC/D,QAKEA,EAAOzB,QCbPgC,EAAU,SAACtD,GAAW,IAAD,EACMC,mBAAS,GADf,mBACvBsD,EADuB,KACXC,EADW,OAEEvD,mBAAS,GAFX,mBAEvBwD,EAFuB,aAGAxD,mBAASyD,MAHT,mBAGvBrD,EAHuB,KAGdsD,EAHc,KAQ9B,SAASD,IACL,OAAO1D,EAAMK,QAAQuD,OAAOL,EAAa,GAAKE,EAAUF,EAAaE,GAEzE,SAASI,EAASC,GACd,GAAmB,SAAfA,EAAuB,CACvB,GAAIP,EAAaE,GAAYzD,EAAMK,QAAQoB,OAAQ,OACnD+B,GAAc,SAAAhC,GAAS,OAAIA,EAAY,SAEpC,CACH,GAAI+B,EAAaE,GAAYzD,EAAMK,QAAQoB,OAAQ,OACnD+B,GAAc,SAAAhC,GAAS,OAAIA,EAAY,MAI/C,OAlBAS,qBAAU,WACN0B,EAAWD,OACZ,CAACH,IAiBA,kBAACQ,EAAA,EAAD,CAAmBC,YAAahE,EAAMiE,eAClC,kBAACC,EAAA,EAAD,CAAMC,GAAI9D,GACN,yBAAKqB,UAAU,qBACX,4BACKrB,EAAQsB,KAAI,SAAAoB,GACT,OACI,kBAAC,EAAD,CAAQ1D,IAAK0D,EAAOnB,GAAImB,OAAQA,QAK5C,yBAAKrB,UAAU,qBACX,4BAAQA,UAAU,MAAMG,QAAS,WAAQgC,EAAS,UAAlD,YACA,4BAAQnC,UAAU,QAAQG,QAAS,WAAQgC,EAAS,UAApD,a,QCzCT,GACXO,OAIJ,WAII,IAHA,IAAIC,EAAO,GACLC,EAAW,iEAERC,EAAI,EAAGA,EAAI,EAAGA,IACnBF,GAAQC,EAASE,OAAOC,KAAKC,MAAMD,KAAKE,SAAWL,EAAS7C,SAGhE,OAAO4C,ICNXzD,IAAGC,WAAW,CACVC,UAAW,2BAGR,IAAM8D,EAAS,WAAO,IAAD,EACc3E,mBAAS,IADvB,mBACjB4E,EADiB,KACJC,EADI,OAEc9D,qBAAWnB,GAFzB,mBAEfQ,EAFe,KAEfA,QAAWG,EAFI,KAIlBuE,EAAY,uCAAG,WAAOC,GAAP,eAAA7D,EAAA,6DACjB6D,EAAEC,iBADe,SAQFrE,IAAGQ,IAAI,UAAW,CAC7BC,EAAGwD,EAAatD,QAAS,aATZ,OAQjB2D,EARiB,OAcjB1E,GAAe,SAACgB,GAEZ,IAAMI,EAAKuD,EAAef,SACpBgB,EAAaC,KAAKC,MACpBpF,EAAc,YAAOsB,EAAUtB,gBAYnC,OAXIsB,EAAUtB,eAAeuB,QAAU,GACnCvB,EAAiBA,EAAeqF,MAAK,SAACC,EAASC,GAAV,OAAsBD,EAAQJ,WAAaK,EAAQL,eACzEM,OAAO,EAAG,EAAG,CAAEpE,MAAOuD,EAAajD,KAAIwD,eAGtDlF,EAAc,CAAI,CAAEoB,MAAOuD,EAAajD,KAAIwD,eAA9B,mBAA+C5D,EAAUtB,iBAE3EA,EAAiBA,EAAeqF,MAAK,SAACC,EAASC,GAAV,OAAsBD,EAAQJ,WAAaK,EAAQL,cAExFjF,EAAeR,cAAc,kBAAmBO,GAEzC,2BAAKsB,GAAZ,IAAuBnB,QAAS6E,EAAQhF,sBA9B3B,2CAAH,sDA4ClB,OACI,yBAAKwB,UAAU,oBAEX,0BAAMiE,SAAUZ,GACZ,2BAAOa,SAZO,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACzBf,EAAee,EAAOnF,QAWsBoF,KAAK,OAAOC,YAAY,oBAC5D,4BAAQD,KAAK,SAASpE,UAAU,yBAC5B,kBAAC,IAAD,CAAaA,UAAU,kBAI3BrB,GAAW,kBAAC,EAAD,CAAS4D,cAfV,WAClBzD,GAAe,SAACgB,GACZ,OAAO,2BAAKA,GAAZ,IAAuBnB,QAAS,WAasBA,QAASA,MCnE5D,OACX,CACI2F,KAAM,IACNC,UCAD,WAEL,OACE,6BAASvE,UAAU,2BACjB,yBAAKA,UAAU,8BACb,kBAAC,EAAD,MACA,kBAAC,EAAD,OAEF,yBAAKA,UAAU,iBACb,kBAAC,EAAD,WCEOwE,MAZf,WACE,OACE,0BAAMxE,UAAU,OACZ,kBAAC,IAAD,KACE,kBAAC,IAAD,KACGyE,EAAOxE,KAAI,SAAAyE,GAAK,OAAI,kBAAC,IAAD,CAAO/G,IAAK+G,EAAMJ,KAAMK,OAAK,EAACJ,UAAWG,EAAMH,UAAWD,KAAMI,EAAMJ,c,MCHvGM,IAASC,OACP,kBAACxG,EAAD,KACE,kBAAC,IAAMyG,WAAP,KACE,kBAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.207a2fc0.chunk.js","sourcesContent":["function loadFromStorage(key) {\r\n    var val = localStorage.getItem(key)\r\n    return (val) ? JSON.parse(val) : null;\r\n}\r\n\r\nfunction saveToStorage(key, val) {\r\n    localStorage[key] = JSON.stringify(val);\r\n}\r\n\r\n\r\nexport default {\r\n    loadFromStorage,\r\n    saveToStorage\r\n}","import React, { useState, createContext } from 'react';\r\nimport storageService from '../services/storageService';\r\n\r\nconst MainContextContext = createContext();\r\n\r\nfunction MainContextProvider(props) {\r\n\r\n    const [MainContext, setMainContext] = useState({\r\n        recentSearches: getIfExsits(),\r\n        results: null,\r\n        track: null\r\n    });\r\n    function getIfExsits() {\r\n        const recentSearches = storageService.loadFromStorage('recent_searches')\r\n        if (recentSearches) {\r\n            return recentSearches\r\n        } else {\r\n            return []\r\n        }\r\n    };\r\n    return (\r\n        <MainContextContext.Provider value={[MainContext, setMainContext]}>\r\n            {props.children}\r\n        </MainContextContext.Provider>\r\n    );\r\n}\r\n\r\nexport { MainContextContext, MainContextProvider };","import React, { useContext } from 'react'\r\nimport { MainContextContext } from '../context/MainContext'\r\nimport SC from 'soundcloud';\r\n\r\nSC.initialize({\r\n    client_id: 'ggX0UomnLs0VmW7qZnCzw '\r\n});\r\nexport const RecentSearches = () => {\r\n    const [{ recentSearches }, setMainContext] = useContext(MainContextContext);\r\n    const initSearch = async (recentSearch) => {\r\n        let results;\r\n        results = await SC.get('/tracks', {\r\n            q: recentSearch.title, license: 'cc-by-sa'\r\n        })\r\n        setMainContext(prevState => {\r\n            return { ...prevState, results }\r\n        })\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                recentSearches.length > 0 &&\r\n                <div className=\"recent-searches-container\">\r\n                    <h2>Recent Searches</h2>\r\n                    <ul>\r\n                        {recentSearches && recentSearches.map(recentSearch => {\r\n                            return (\r\n                                <li key={recentSearch.id} onClick={() => initSearch(recentSearch)}>\r\n                                    {recentSearch.title}\r\n                                </li>\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </div>\r\n            }\r\n        </>\r\n\r\n\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useState } from 'react'\r\nimport SC from 'soundcloud';\r\nimport { MainContextContext } from '../context/MainContext';\r\n\r\nexport const Track = () => {\r\n    const [player, setPlayer] = useState(null)\r\n    const [{ track }, setMainContext] = useContext(MainContextContext);\r\n    useEffect(() => {\r\n        setPlayer(null)\r\n    }, [track])\r\n\r\n    const handlePlay = async () => {\r\n        const oEmbed = await SC.oEmbed(track.uri, { auto_play: true })\r\n        setPlayer(oEmbed.html)\r\n        console.log('player', player);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {\r\n                track && <div className=\"track-container\">\r\n                    <h1>{track.title}</h1>\r\n\r\n                    {player ?\r\n                        <div className=\"player\" dangerouslySetInnerHTML={{ __html: player }}></div>\r\n                        :\r\n                        <img onClick={handlePlay} src={track.artwork_url} alt=\"\" />\r\n                    }\r\n                </div>\r\n            }\r\n        </>\r\n\r\n\r\n\r\n    )\r\n}\r\n","import React, { useContext, useState } from 'react'\r\nimport { useRef } from 'react';\r\nimport { MainContextContext } from '../context/MainContext';\r\n\r\nexport const Result = ({ result }) => {\r\n    const resultRef = useRef(null)\r\n    const [isFlying, setIsFlying] = useState(false)\r\n    const [{ track }, setMainContext] = useContext(MainContextContext);\r\n\r\n    const handleFlyToImage = () => {\r\n        setIsFlying(true)\r\n        setTimeout(() => {\r\n            setMainContext((prevState) => { return { ...prevState, track: result } })\r\n        }, 1500);\r\n    };\r\n\r\n    return (\r\n        <li className={`result-container ${isFlying ? 'animateFlying' : ''}`} ref={resultRef} onClick={handleFlyToImage} >\r\n            {result.title}\r\n        </li>\r\n    )\r\n}\r\n","import { ClickAwayListener, Fade } from '@material-ui/core'\r\nimport React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { Result } from './Result'\r\n\r\nexport const Results = (props) => {\r\n    const [pageNumber, setPageNumber] = useState(1)\r\n    const [pageSize, setPageSize] = useState(6)\r\n    const [results, setResults] = useState(getPaginatedResults())\r\n    useEffect(() => {\r\n        setResults(getPaginatedResults())\r\n    }, [pageNumber])\r\n\r\n    function getPaginatedResults() {\r\n        return props.results.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\r\n    }\r\n    function paginate(nextOrPrev) {\r\n        if (nextOrPrev === 'next') {\r\n            if (pageNumber * pageSize >= props.results.length) return\r\n            setPageNumber(prevState => prevState + 1)\r\n\r\n        } else {\r\n            if (pageNumber * pageSize <= props.results.length) return\r\n            setPageNumber(prevState => prevState - 1)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <ClickAwayListener onClickAway={props.toggleResults}>\r\n            <Fade in={results}>\r\n                <div className=\"results-container\" >\r\n                    <ul>\r\n                        {results.map(result => {\r\n                            return (\r\n                                <Result key={result.id} result={result} />\r\n\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                    <div className=\"actions-container\">\r\n                        <button className=\"sec\" onClick={() => { paginate('prev') }}>Previous</button>\r\n                        <button className=\"prime\" onClick={() => { paginate('next') }}>Next</button>\r\n                    </div>\r\n                </div>\r\n            </Fade>\r\n        </ClickAwayListener>\r\n\r\n    )\r\n}\r\n","export default {\r\n    makeId\r\n}\r\n\r\n\r\nfunction makeId() {\r\n    let text = \"\";\r\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    for (let i = 0; i < 8; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}","import React, { useContext, useState } from 'react'\r\nimport { Results } from './Results'\r\nimport { BiSearchAlt } from 'react-icons/bi'\r\nimport SC from 'soundcloud';\r\nimport storageService from '../services/storageService';\r\nimport { MainContextContext } from '../context/MainContext';\r\nimport utilityService from '../services/utilityService';\r\nSC.initialize({\r\n    client_id: 'ggX0UomnLs0VmW7qZnCzw '\r\n});\r\n\r\nexport const Search = () => {\r\n    const [searchInput, setSearchInput] = useState('')\r\n    const [{ results }, setMainContext] = useContext(MainContextContext);\r\n\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault()\r\n        let tracks;\r\n\r\n        // *FOR DEVELOPMENT ONLY*\r\n        // if (storageService.loadFromStorage('tracks')) {\r\n        //     tracks = storageService.loadFromStorage('tracks')\r\n        // } else {\r\n        tracks = await SC.get('/tracks', {\r\n            q: searchInput, license: 'cc-by-sa'\r\n        })\r\n        //     storageService.saveToStorage('tracks', tracks)\r\n        // }\r\n        // END *FOR DEVELOPMENT ONLY*\r\n        setMainContext((prevState) => {\r\n\r\n            const id = utilityService.makeId()\r\n            const created_at = Date.now()\r\n            let recentSearches = [...prevState.recentSearches]\r\n            if (prevState.recentSearches.length >= 5) {\r\n                recentSearches = recentSearches.sort((search1, search2) => search1.created_at - search2.created_at)\r\n                recentSearches.splice(0, 1, { title: searchInput, id, created_at })\r\n\r\n            } else {\r\n                recentSearches = [{ title: searchInput, id, created_at }, ...prevState.recentSearches]\r\n            }\r\n            recentSearches = recentSearches.sort((search1, search2) => search1.created_at - search2.created_at)\r\n\r\n            storageService.saveToStorage('recent_searches', recentSearches)\r\n\r\n            return { ...prevState, results: tracks, recentSearches }\r\n\r\n\r\n        });\r\n    };\r\n\r\n    const handleSearchInput = ({ target }) => {\r\n        setSearchInput(target.value)\r\n    };\r\n    const toggleResults = () => {\r\n        setMainContext((prevState) => {\r\n            return { ...prevState, results: null }\r\n        })\r\n    };\r\n    return (\r\n        <div className=\"search-container\">\r\n\r\n            <form onSubmit={handleSearch}>\r\n                <input onChange={handleSearchInput} type=\"text\" placeholder=\"Type to search!\" />\r\n                <button type=\"submit\" className=\"search-icon-container\" >\r\n                    <BiSearchAlt className=\"search-icon\" />\r\n                </button>\r\n            </form>\r\n            {\r\n                results && <Results toggleResults={toggleResults} results={results} />\r\n\r\n            }\r\n\r\n        </div>\r\n    )\r\n}\r\n","import {Home} from './views/Home'\r\n\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: Home\r\n    }\r\n]","import React from 'react'\r\nimport { RecentSearches } from '../cmps/RecentSearches'\r\nimport { Track } from '../cmps/Track'\r\nimport { Search } from '../cmps/Search'\r\n\r\nexport function Home() {\r\n\r\n  return (\r\n    <section className=\"home flex space-between\">\r\n      <div className=\"search-wrapper flex column\">\r\n        <Search />\r\n        <RecentSearches />\r\n      </div>\r\n      <div className=\"track-wrapper\">\r\n        <Track />\r\n      </div>\r\n\r\n    </section>\r\n  )\r\n}\r\n","import React from 'react';\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport routes from './routes';\n\nfunction App() {\n  return (\n    <main className=\"app\">\n        <Router>\n          <Switch>\n            {routes.map(route => <Route key={route.path} exact component={route.component} path={route.path} />)}\n          </Switch>\n        </Router>\n    </main>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './assets/style/main.scss';\nimport { MainContextProvider } from \"./context/MainContext\";\n\nReactDOM.render(\n  <MainContextProvider>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </MainContextProvider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}